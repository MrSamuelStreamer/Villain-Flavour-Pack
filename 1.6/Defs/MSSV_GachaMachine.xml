<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="BenchBase">
    <defName>MSSV_Gacha_Workbench</defName>
    <label>Gacha machine</label>
    <description>An enigmatic machine of seemingly ancient design. It seems to autonomously synthesise advanced, complex objects, inexplicably only requiring silver to start the process.\n\nSlogans drawn on the side of the mysterious machine suggest that once initiated, the machine enters a self-directed fabrication cycle, rearranging matter according to random patterns. It emphasises over and over that there are no refunds.\n\nA tiny warning underneath the slogans indicate that it takes some time to work and there is a biometric scanner to facilitate home delivery; however if no biometric data is mmatched, it'll simply drop to the dispensary box for anyone to retrieve.\n\n\nSomeone has put a sticker on the bottom of the machine.</description>
    <thingClass>MSSV_Gacha_Random.Building_GachaMachine</thingClass>
    <graphicData>
      <texPath>Buildings/Gachamachine/gachamachine</texPath>
      <graphicClass>Graphic_Multi</graphicClass>
      <drawSize>(4,3)</drawSize>
      <drawOffset>(0, 0, 0.7)</drawOffset>
    </graphicData>
    <uiIconScale>0.8</uiIconScale>
    <uiIconOffset>(0,0)</uiIconOffset>
    <castEdgeShadows>true</castEdgeShadows>
    <altitudeLayer>BuildingOnTop</altitudeLayer>
    <defaultPlacingRot>North</defaultPlacingRot>
    <hasInteractionCell>true</hasInteractionCell>
    <interactionCellOffset>(1, 0, -1)</interactionCellOffset>
    <rotatable>true</rotatable>
    <costList>
      <Plasteel>75</Plasteel>
      <Steel>50</Steel>
      <ComponentIndustrial>5</ComponentIndustrial>
      <ComponentSpacer>2</ComponentSpacer>
    </costList>
    <tradeability>Buyable</tradeability>
    <fillPercent>0.5</fillPercent>
    <useHitPoints>True</useHitPoints>
    <tickerType>Normal</tickerType>
        <statBases>
      <MaxHitPoints>400</MaxHitPoints>
      <WorkToBuild>60000</WorkToBuild>
      <Mass>30</Mass>
      <Beauty>0</Beauty>
      <Flammability>0</Flammability>
      <MSSV_Gacha_Duration>1</MSSV_Gacha_Duration>
      <MSSV_Gacha_PowerStored>1</MSSV_Gacha_PowerStored>
      <WorkTableWorkSpeedFactor>1</WorkTableWorkSpeedFactor>
    </statBases>
    <size>(2,1)</size>
    <designationCategory>Production</designationCategory>
    <uiOrder>2999</uiOrder>
    <passability>PassThroughOnly</passability>
    <pathCost>50</pathCost>
    <surfaceType>Item</surfaceType>
    <inspectorTabs>
      <li>ITab_Bills</li>
    </inspectorTabs>
    <building>
      <spawnedConceptLearnOpportunity>BillsTab</spawnedConceptLearnOpportunity>
      <canPlaceOverImpassablePlant>false</canPlaceOverImpassablePlant>
      <ai_chillDestination>false</ai_chillDestination>
      <buildingTags>
        <li>Production</li>
      </buildingTags>
      <destroySound>BuildingDestroyed_Metal_Big</destroySound>
    </building>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <shortCircuitInRain>true</shortCircuitInRain>
        <basePowerConsumption>200</basePowerConsumption>
        <idlePowerDraw>30</idlePowerDraw>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>3</glowRadius>
        <glowColor>(150,150,150,0)</glowColor>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Breakdownable" />
    </comps>
    <placeWorkers>
      <li>PlaceWorker_PreventInteractionSpotOverlap</li>
    </placeWorkers>
    <researchPrerequisites>
      <li>Machining</li>
    </researchPrerequisites>
    <!--  weights add up to 100 (not mandatory, just felt cleaner). not sure how to approach it so left it as is
          mess around with these <weight> figures to make stuff more/less likely.
          <tier>s: 0=whatever, 1=good, 2=wooooooo (affects letter received, can look weird if not targeted appropriately to the letter desc) -->
    <modExtensions>
      <li Class="MSSV_Gacha_Random.RandomOutputExtension">
        <nothingDescCount>6</nothingDescCount>
        <genericDescCount>3</genericDescCount>
        <goodDescCount>2</goodDescCount>
        <greatDescCount>2</greatDescCount>
        <outputs>
          <!-- tier 0 loot -->
          <li>
            <thingDef>ARandom_MaterialsLootBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_MedicineLootBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_MealsBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_BooksBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_DrinksBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_TribalLootBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_ShellsLootBox</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <li>
            <thingDef>ARandom_HemogenCrate</thingDef>
            <weight>5</weight>
            <tier>0</tier>
          </li>
          <!-- tier 1 loot -->
          <li>
            <thingDef>ARandom_WeaponsBox</thingDef>
            <weight>10</weight>
            <tier>1</tier>
          </li>
          <li>
            <thingDef>ARandom_ApparelLootBox</thingDef>
            <weight>5</weight>
            <tier>1</tier>
          </li>
          <li>
            <thingDef>ARandom_LootBox</thingDef>
            <weight>10</weight>
            <tier>1</tier>
          </li>
          <li>
            <thingDef>ARandom_FateManipulator</thingDef>
            <weight>10</weight>
            <tier>1</tier>
          </li>
          <!-- tier 2 loot -->
          <li>
            <thingDef>ARandom_ValuablesLootBox</thingDef>
            <weight>5</weight>
            <tier>2</tier>
          </li>
          <li>
            <thingDef>ARandom_LootBox_High</thingDef>
            <weight>5</weight>
            <tier>2</tier>
          </li>
          <li>
            <thingDef>ARandom_LootBox_SuperHigh</thingDef>
            <weight>5</weight>
            <tier>2</tier>
          </li>
          <!-- no loot at all -->
          <li>
            <isNothing>true</isNothing>
            <weight>10</weight>
          </li>
        </outputs>
      </li>
    </modExtensions>
  </ThingDef>

  <!-- workgivers etc -->
  <WorkGiverDef>
      <defName>MSSV_Gacha_DoBill</defName>
      <label>do gacha machine work</label>
      <giverClass>WorkGiver_DoBill</giverClass>
      <workType>Smithing</workType>
      <priorityInType>330</priorityInType>
      <fixedBillGiverDefs>
          <li>MSSV_Gacha_Workbench</li>
      </fixedBillGiverDefs>
      <verb>work at</verb>
      <gerund>working at</gerund>
      <requiredCapacities>
          <li>Manipulation</li>
      </requiredCapacities>
      <prioritizeSustains>true</prioritizeSustains>
  </WorkGiverDef>

  <StatDef>
      <defName>MSSV_Gacha_PowerStored</defName>
      <label>stored power need multiplier</label>
      <description>This value represents the multiplier of stored power needed to start forming recipes.</description>
      <category>Building</category>
      <defaultBaseValue>1</defaultBaseValue>
      <minValue>0</minValue>
      <maxValue>1</maxValue>
      <toStringStyle>PercentZero</toStringStyle>
      <showIfUndefined>false</showIfUndefined>
      <displayPriorityInCategory>3000</displayPriorityInCategory>
  </StatDef>

  <StatDef>
      <defName>MSSV_Gacha_Duration</defName>
      <label>forming duration</label>
      <description>This value represents the multiplier of forming recipes duration.</description>
      <category>Building</category>
      <defaultBaseValue>1</defaultBaseValue>
      <minValue>0</minValue>
      <maxValue>1</maxValue>
      <toStringStyle>PercentZero</toStringStyle>
      <showIfUndefined>false</showIfUndefined>
      <displayPriorityInCategory>3000</displayPriorityInCategory>
  </StatDef>

  <!-- Parent gacha recipe - legacy since i changed the bills around, but might update later so retained -->
  <RecipeDef Abstract="True" Name="MSSV_Gacha_Gestator">
    <jobString>Playing with gacha machine.</jobString>
    <workAmount>1800</workAmount>
    <formingTicks>7500</formingTicks>
    <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
    <soundWorking>MechGestatorCycle_Initiating</soundWorking>
    <recipeUsers>
      <li>MSSV_Gacha_Workbench</li>
    </recipeUsers>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>Silver</li>
          </thingDefs>
        </filter>
        <count>100</count>
      </li>
    </ingredients>
    <researchPrerequisite>Machining</researchPrerequisite>
    <workSkill>Crafting</workSkill>
  </RecipeDef>
  <RecipeDef ParentName="MSSV_Gacha_Gestator">
    <defName>MSSV_Gacha_Pull</defName>
    <label>insert coins and play</label>
    <description>Insert silver for maybe big prize. No refunds!</description>
  </RecipeDef>

</Defs>